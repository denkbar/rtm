<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<link rel="shortcut icon" href="img/favicon.png">

<title>RTM 3.0.0</title>
<script src="bower_components/jquery/dist/jquery.js"></script>
<script src="bower_components/angular/angular.js"></script>
<script src="bower_components/d3/d3.js"></script>
<script src="bower_components/nvd3/build/nv.d3.js"></script>
<script src="bower_components/angular-nvd3/dist/angular-nvd3.js"></script>
<script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

<script
	src="bower_components/exense-visualization/src/js/rtm-controls.js"></script>
<script src="bower_components/exense-visualization/src/js/global-classes.js"></script>
<script src="bower_components/exense-visualization/src/js/viz-query.js"></script>
<script
	src="bower_components/exense-visualization/src/js/viz-dashlet.js"></script>
<script
	src="bower_components/exense-visualization/src/js/viz-mgd-widget.js"></script>
<script
	src="bower_components/exense-visualization/src/js/viz-widget-manager.js"></script>

<script src="js/rtm-sidebar.js"></script>

<link rel="stylesheet" href="bower_components/nvd3/build/nv.d3.css">
<link rel="stylesheet"
	href="bower_components/bootstrap/dist/css/bootstrap-theme.css">
<link rel="stylesheet"
	href="bower_components/bootstrap/dist/css/bootstrap.css">

<link rel="stylesheet"
	href="bower_components/exense-visualization/src/css/viz-dashlet.css">
<link rel="stylesheet"
	href="bower_components/exense-visualization/src/css/viz-mgd-widget.css">
<link rel="stylesheet"
	href="bower_components/exense-visualization/src/css/viz-widget-manager.css">

</head>

<script>
	var rtmApp = angular.module('rtm', [ 'viz-widget-manager', 'rtm-sidebar' ]);
	rtmApp.controller('topController', [ '$scope', function($scope) {

		$scope.deriveEventName = function(sbName) {
			return sbName.split('.')[1];
		};

		$scope.$on('sb.dashboard-new', function(event) {
			$scope.$broadcast($scope.deriveEventName(event.name))
		});
		$scope.$on('sb.dashboard-clear', function(event) {
			$scope.$broadcast($scope.deriveEventName(event.name))
		});
		$scope.$on('sb.dashboard-current-addWidget', function(event) {
			$scope.$broadcast($scope.deriveEventName(event.name))
		});
		$scope.$on('sb.dashboard-current-clearWidgets', function(event) {
			$scope.$broadcast($scope.deriveEventName(event.name))
		});
		$scope.$on('dashboard-change', function(event) {
			$scope.$broadcast('dashboard-reload');
		});
		$scope.$on('sb.dashboard-load', function(event) {
			$scope.$broadcast($scope.deriveEventName(event.name))
		});
		$scope.$on('sb.dashboard-configure', function(event) {
			$scope.$broadcast($scope.deriveEventName(event.name))
		});
		$scope.$on('sb.docs', function(event) {
			$scope.$broadcast($scope.deriveEventName(event.name))
		});

	} ]);
</script>

<body>
	<div ng-app='rtm'>
		<div ng-controller="topController">
			<rtm-sidebar></rtm-sidebar>
			<div style="margin-left: 80px;">
				<viz-dashboard-manager></viz-dashboard-manager>
			</div>
		</div>
	</div>
</body>

</html>